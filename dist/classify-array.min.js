/*!
 * Classify JavaScript Array Extension Class v0.1.0
 * http://www.closedinterval.com/
 *
 * Copyright 2012, Wei Kin Huang
 * Classify-Array is freely distributable under the MIT license.
 *
 * Date: Fri, 01 Jun 2012 20:04:50 GMT
 */;(function(a,b){"use strict";var c=function(){var a=Array.prototype,b,c,d,e,f;d=a.indexOf?function(b,c){return a.indexOf.call(b,c)}:function(a,b){var c=0,d=a.length;while(c<d){if(a[c]===b)return c;c++}return-1},e=function(b){var c=0,d=b.length,e=[];while(c<d)b&&b[c].length?a.push.apply(e,a.slice.call(b[c],0)):e.push(b[c]),c++;return e},a.map?b=function(b,c){return this.getNewObject(a.map.apply(this,arguments))}:b=function(a,b){var c=[],d=0,e=this.length;while(d<e)c[c.length]=a.call(b||null,this[d],d,this),d++;return this.getNewObject(c)},a.filter?c=function(b,c){return this.getNewObject(a.filter.apply(this,arguments))}:c=function(a,b){var c=[],d=0,e=this.length;while(d<e)a.call(b||null,this[d],d,this)&&(c[c.length]=this[d]),d++;return this.getNewObject(c)},f=Classify.getGlobalNamespace().create("Array",{length:0,init:function(){this.push.apply(this,arguments)}}),f.addUnwrappedProperty({toArray:function(){return a.slice.call(this,0)},getNewObject:function(a){var b=new f;return b.push.apply(b,a),b},pop:a.pop,push:a.push,reverse:a.reverse,shift:a.shift,sort:a.sort,join:a.join,filter:c,map:b,splice:function(){return this.getNewObject(a.splice.apply(this,arguments))},unshift:function(){return a.unshift.apply(this,arguments),this.length},concat:function(b){return this.getNewObject(a.concat.apply(this.toArray(),arguments))},slice:function(b,c){return this.getNewObject(a.slice.apply(this,arguments))},shuffle:function(){var a=this.length,b=a,c,d;while(b--)c=parseInt(Math.random()*a,10),d=this[b],this[b]=this[c],this[c]=d;return this},copy:function(){return this.getNewObject(a.slice.call(this,0))},fill:function(a,b){this.clear();while(a-->0)this.push(b);return this},range:function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0;this.clear();while(e++<d)this.push(a),a+=c;return this},indexOf:a.indexOf||function(a){var b=0,c=this.length;while(b<c){if(this[b]===a)return b;b++}return-1},lastIndexOf:a.lastIndexOf||function(a){var b=this.length;while(b--)if(this[b]===a)return b;return-1},include:function(a){return this.indexOf(a)!=-1},clear:function(){return this.length=0,this},first:function(){return this[0]},last:function(){return this[this.length-1]},get:function(a){return this[a<0?this.length+a:a]},rand:function(){return this[Math.round(Math.random()*(this.length-1))]},size:function(){return this.length},diff:function(a){var b=e(arguments);return this.unique().filter(function(a){return d(b,a)===-1})},intersect:function(a){var b=e(arguments);return this.unique().filter(function(a){return d(b,a)>-1})},asyncEach:function(a,b,c,d){var e,f,g=!1,h=this.toArray(),i=this,j=0,k=function(){e=+(new Date);do if(a.call(c||null,h.shift(),j++,i)===!1){g=!0;break}while(!g&&h.length>0&&+(new Date)-e<50);!g&&h.length>0?f=setTimeout(k,d||25):b&&b.call(c||null,i)};return i.length===0?b&&b.call(c||null,i):f=setTimeout(k,d||25),this},every:a.every||function(a,b){var c=0,d=this.length;while(c<d){if(!a.call(b||null,this[c],c,this))return!1;c++}return!0},forEach:a.forEach||function(a,b){var c=0,d=this.length;while(c<d)a.call(b||null,this[c],c,this),c++},some:a.some||function(a,b){var c=0,d=this.length;while(c<d){if(a.call(b||null,this[c],c,this))return!0;c++}return!1},reduce:a.reduce||function(a,b){var c=0,d=this.length;if(arguments.length<2){if(d===0)throw new TypeError("Array length is 0 and no second argument");b=this[0],c=1}while(c<d)b=a.call(null,b,this[c],c,this),++c;return b},reduceRight:a.reduceRight||function(a,b){var c=this.length;if(c===0&&arguments.length===1)throw new TypeError("Array length is 0 and no second argument");var d=c-1;arguments.length<2&&(b=this[d--]);while(d>=0)b=a.call(null,b,this[d],d,this),d--;return b},serialEach:function(a,b,c){var d=this,e=this.toArray(),f=0,g=function(){if(e.length===0){b&&b.call(c||null,d);return}a.call(c||null,g,e.shift(),f++,d)};return g(),this},threadEach:function(a,b,c){var d=this,e=this.length,f=!1,g=function(){--e===0&&!f&&(f=!0,b&&b.call(c||null,d))};return d.length===0?(b&&b.call(c||null,d),this):this.asyncEach(function(d,e,h){if(a.call(c||null,g,d,e,h)===!1)return f=!0,b&&b.call(c||null,h),!1},null,c,1)},unique:function(a,b){var c=this,e=b?c.map(b):c,f=[];return e.reduce(function(b,e,g){if(a?b[b.length-1]!==e||!b.length:d(b,e)===-1)b.push(e),f.push(c[g]);return b},[]),this.getNewObject(f)}})};if(typeof Classify!="undefined"&&typeof module!="undefined"&&module.exports){module.exports=c;return}c(Classify)})(this);
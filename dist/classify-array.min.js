/*!
 * Classify JavaScript Array Extension Class v0.1.0
 * http://www.closedinterval.com/
 *
 * Copyright 2012, Wei Kin Huang
 * Classify-Array is freely distributable under the MIT license.
 *
 * Date: Thu, 31 May 2012 19:03:22 GMT
 */;(function(a,b){"use strict";var c=Array.prototype,d,e,f,g,h;f=c.indexOf?function(a,b){return c.indexOf.call(a,b)}:function(a,b){var c=0,d=a.length;while(c<d){if(a[c]===b)return c;c++}return-1},g=function(a){var b=0,d=a.length,e=[];while(b<d)a&&a[b].length?c.push.apply(e,c.slice.call(a[b],0)):e.push(a[b]),b++;return e},c.map?d=function(a,b){return this.getNewObject(c.map.apply(this,arguments))}:d=function(a,b){var c=[],d=0,e=this.length;while(d<e)c[c.length]=a.call(b||null,this[d],d,this),d++;return this.getNewObject(c)},c.filter?e=function(a,b){return this.getNewObject(c.filter.apply(this,arguments))}:e=function(a,b){var c=[],d=0,e=this.length;while(d<e)a.call(b||null,this[d],d,this)&&(c[c.length]=this[d]),d++;return this.getNewObject(c)},h=Classify.getGlobalNamespace().create("Array",{length:0,init:function(){this.push.apply(this,arguments)}}),h.addUnwrappedProperty({toArray:function(){return c.slice.call(this,0)},getNewObject:function(a){var b=new h;return b.push.apply(b,a),b},pop:c.pop,push:c.push,reverse:c.reverse,shift:c.shift,sort:c.sort,join:c.join,filter:e,map:d,splice:function(){return this.getNewObject(c.splice.apply(this,arguments))},unshift:function(){return c.unshift.apply(this,arguments),this.length},concat:function(a){return this.getNewObject(c.concat.apply(this.toArray(),arguments))},slice:function(a,b){return this.getNewObject(c.slice.apply(this,arguments))},shuffle:function(){var a=this.length,b=a,c,d;while(b--)c=parseInt(Math.random()*a,10),d=this[b],this[b]=this[c],this[c]=d;return this},copy:function(){return this.getNewObject(c.slice.call(this,0))},fill:function(a,b){this.clear();while(a-->0)this.push(b);return this},range:function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0;this.clear();while(e++<d)this.push(a),a+=c;return this},indexOf:c.indexOf||function(a){var b=0,c=this.length;while(b<c){if(this[b]===a)return b;b++}return-1},lastIndexOf:c.lastIndexOf||function(a){var b=this.length;while(b--)if(this[b]===a)return b;return-1},include:function(a){return this.indexOf(a)!=-1},clear:function(){return this.length=0,this},first:function(){return this[0]},last:function(){return this[this.length-1]},get:function(a){return this[a<0?this.length+a:a]},rand:function(){return this[Math.round(Math.random()*(this.length-1))]},size:function(){return this.length},diff:function(a){var b=g(arguments);return this.unique().filter(function(a){return f(b,a)===-1})},intersect:function(a){var b=g(arguments);return this.unique().filter(function(a){return f(b,a)>-1})},asyncEach:function(a,b,c,d){var e,f,g=!1,h=this.toArray(),i=this,j=0,k=function(){e=+(new Date);do if(a.call(c||null,h.shift(),j++,i)===!1){g=!0;break}while(!g&&h.length>0&&+(new Date)-e<50);!g&&h.length>0?f=setTimeout(k,d||25):b&&b.call(c||null,i)};return i.length===0?b&&b.call(c||null,i):f=setTimeout(k,d||25),this},every:c.every||function(a,b){var c=0,d=this.length;while(c<d){if(!a.call(b||null,this[c],c,this))return!1;c++}return!0},forEach:c.forEach||function(a,b){var c=0,d=this.length;while(c<d)a.call(b||null,this[c],c,this),c++},some:c.some||function(a,b){var c=0,d=this.length;while(c<d){if(a.call(b||null,this[c],c,this))return!0;c++}return!1},reduce:c.reduce||function(a,b){var c=0,d=this.length;if(arguments.length<2){if(d===0)throw new TypeError("Array length is 0 and no second argument");b=this[0],c=1}while(c<d)b=a.call(null,b,this[c],c,this),++c;return b},reduceRight:c.reduceRight||function(a,b){var c=this.length;if(c===0&&arguments.length===1)throw new TypeError("Array length is 0 and no second argument");var d=c-1;arguments.length<2&&(b=this[d--]);while(d>=0)b=a.call(null,b,this[d],d,this),d--;return b},serialEach:function(a,b,c){var d=this,e=this.toArray(),f=0,g=function(){if(e.length===0){b&&b.call(c||null,d);return}a.call(c||null,g,e.shift(),f++,d)};return g(),this},threadEach:function(a,b,c){var d=this,e=this.length,f=!1,g=function(){--e===0&&!f&&(f=!0,b&&b.call(c||null,d))};return d.length===0?(b&&b.call(c||null,d),this):this.asyncEach(function(d,e,h){if(a.call(c||null,g,d,e,h)===!1)return f=!0,b&&b.call(c||null,h),!1},null,c,1)},unique:function(a,b){var c=this,d=b?c.map(b):c,e=[];return d.reduce(function(b,d,g){if(a?b[b.length-1]!==d||!b.length:f(b,d)===-1)b.push(d),e.push(c[g]);return b},[]),this.getNewObject(e)}})})(this);